<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <script src="https://js.puter.com/v2/"></script>
</head>
<body>

<h2>Image → Image Illimité via Nano Banana</h2>

<input type="file" id="fileInput" accept="image/*"><br><br>

<input type="text" id="prompt" placeholder="Ex: style anime, crayon, peinture..." style="width:300px;"><br><br>

<button onclick="transform()">Transformer l’image</button>

<script>
function transform() {
  const file = document.getElementById("fileInput").files[0];
  const promptText = document.getElementById("prompt").value;

  if (!file || !promptText) {
    alert("Image + texte obligatoires");
    return;
  }

  const reader = new FileReader();

  reader.onload = function() {
    const base64 = reader.result.split(",")[1];

    puter.ai.txt2img(promptText, {
      model: "gemini-2.5-flash-image-preview",
      input_image: base64,
      input_image_mime_type: file.type
    }).then(img => {
      document.body.appendChild(img);
    });
  };

  reader.readAsDataURL(file);
}
</script>

</body>
</html>
